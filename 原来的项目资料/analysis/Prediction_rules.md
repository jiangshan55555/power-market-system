[description]
## 电力市场出清价格预测项目强制规则

### 1. 数据读取规范
- 原始数据必须从`rawdata`目录读取
- 必须正确处理双层表头和复杂时间戳
- 所有24:00时间戳必须转换为次日00:00

### 2. 预测输入输出规则
- **输出**：预测的实时电价（每15分钟一个预测点）
- **输入**：所有变量可用，但必须遵守GAP滞后期限制
  - 在训练和预测目标之间强制加入时间间隔
  - 例如：预测今天(T日)电价不可用昨日(T-1日)数据

### 3. GAP预测逻辑（核心规则）
- 预测d日电价时，禁止使用(d-T)日及之后的数据
  - T=1时：预测d日仅能用(d-2)日及更早数据
  - 实例：预测5月9日时，5月8日数据必须禁用

### 4. 滚动预测执行规则
- 必须采用逐日向前滚动预测方法
  - 示例流程：
    1. T=1逻辑：用5.1-5.7数据预测5.9
    2. 预测5.10：用5.1-5.8全部数据
- 核心目标：最大化利用可用数据样本


Historical预测方法是一个基于历史同期数据的简单预测方法，其工作原理如下：
对于每个需要预测的时刻，按照以下优先级寻找历史数据：
首选：找同一小时且同一周几的历史数据
例如：要预测周二上午10点的电价，就先找历史数据中所有周二上午10点的记录
使用最近的一条记录作为预测值
次选：如果找不到同一周几的数据，就找同一小时的历史数据
例如：如果找不到周二上午10点的记录，就找所有上午10点的记录
使用最近的一条记录作为预测值
最后：如果连同一小时的数据都找不到，就使用历史数据的平均值



### 5. 动态特征生成规范
- 特征必须按预测日动态生成
- 数据充足时（后期预测）：
  - 保留更长时间特征
  - 增加密集特征
- 数据不足时（早期预测）：
  - 仅使用可用的历史特征
  - 基于特征相关性和重要性进行选择

### 6. 参数自动优化
- 每个模型都要做自动寻参，就是超参数优化
- 对表现好的参数，单独创建一个md文档，保存运行的时刻，当前的随机数种子和参数值
- 所有模型都使用了并行计算来加速寻参过程

### 7. 模型集成
- 使用voting方式做集成
- 每个模型的预测期做集成
- 集成权重需要优化

### 8. 模型输出要求
**输出目录**：所有结果必须保存至`output`下的子文件夹  
**Excel输出**：
  - 所有实际值和预测值在一个excel里，而不是多个
  - 包含所有预测值
  - 必须附加时间戳和实际值列  
**PNG图像**：
  1. 全样本期实际值 vs 预测值（横轴=实际时间）
  2. 最后一日（5.31）预测图（纵轴范围：[0, 当日最大值+50]）
  - 两图必须保证视觉美观  
**Markdown报告**：
  - 每次运行都需要输出，我希望把模型的所有细节，都输出到md文档，尤其是我们做的所有优化；
  - 强制章节：
    - ## 模型说明（包括运行时刻，运行时长）
    - ## 预测性能比较
    - ## 结果分析
    - ## 重要特征分析
    - ## 可视化分析
    - ## 是否过拟合
    - ## 结论  
**详细模型报告**：
  - `performance_report.md`必须包含：
    - 预测执行时间（精确到分钟）
    - 完整模型参数和层结构
    - 其他技术细节（尽可能详尽）




[attachments]
# 应用范围：所有核心脚本和输出位置
*.py              # Python脚本
*.ipynb           # Jupyter笔记本
model_results/*   # 输出目录


integrated_model.py # 主模型文件
